import{d as p,r as d,G as l,l as m,c as h,e as v,q as y,B as _,g as w,A as x,L as f,H as $,u as b,h as g,a as k}from"./index.be173f1f.js";const B=["placeholder"],C=p({props:["type"],emits:["custom-search"],setup(u,{emit:c}){const r=u,o=d(""),a=l(),n=m(()=>`Enter ${r.type==="movies"?"movie":r.type} imdbId`),e=async t=>{try{await f(t),c("custom-search",t.toString())}catch(s){a.show(s,!0)}};return(t,s)=>(h(),v("form",{"data-search":"",class:"mt-5 flex a-strech w-search min-auto imdb",onSubmit:s[1]||(s[1]=x(i=>e(o.value),["prevent"]))},[y(w("input",{"onUpdate:modelValue":s[0]||(s[0]=i=>o.value=i),type:"search",name:"search",placeholder:n.value,class:"w-max pin-3 pbl-2 f-size-normal bw-1 b-gray-d br-6"},null,8,B),[[_,o.value]])],32))}});const E={"data-page-proxy":"","data-padded":""},T=p({setup(u){d({});const c=$(),r=l(),o=b(),a=m(()=>{var t;let e;switch((t=o.query)==null?void 0:t.type){case"series":case"s":e="series";break;case"movies":case"m":default:e="movies";break}return e}),n=async e=>{const t=a.value==="movies"?"movie":"show";try{if(await k(`public/${a.value}/${e}`,!0))return r.show(`This ${t} already exsts, Editing...`),c.push(`/edit?type=${a.value}&imdbid=${e}`)}catch(s){return r.show(s,!0),r.show(`Creating new ${t}...`),c.push(`/create?type=${a.value}&imdbid=${e}`)}};return(e,t)=>(h(),v("div",E,[g(C,{type:a.value,onCustomSearch:n},null,8,["type"])]))}});export{T as default};
