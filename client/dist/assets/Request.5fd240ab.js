import{d as j,i as o,r as b,y as S,b as g,c as i,e as l,g as e,s as B,m as f,j as v,x as _,A as y,q as A,B as F,t as k,k as s,C as U,D as V,a as E}from"./index.5bca4349.js";const N={"data-page-request":""},P={class:"hero pbl-9 relative","data-padded":""},M=s(" All Requests "),$={class:"grid g-2 min-auto w-fit mb-10"},G=["onSubmit"],J=e("input",{type:"submit",value:"\u2705",class:"pbl-2 pr-3 pl-2 f-size-m-big bg-gray-l cursor"},null,-1),L=e("a",{class:"f-size-normal text-center c-blue",href:"#request-text"},[s("Whats this? "),e("span",{class:"f-e"},"\u2139")],-1),O={key:1,"data-s-request-link":"",class:"br-4 min-auto"},W=e("div",null,null,-1),Y=e("div",{class:"close pin-5 br-4"},null,-1),H=[W,Y],K={class:"f-size-a-big f-round weight-normal"},Q=["onClick"],X=e("div",{id:"request-text",class:"pbl-5 grid g-2 lh-2 f-size-normal","data-padded":""},[e("p",null,[s("This is a means to `officially` request for movies and shows you want to see. The imdbID is needed to avoid confilct of names of different movies. To get the imdbID, Just do go to the imdbPage for your show. For example in this URL `https://www.imdb.com/title/tt0944947/`, the imdbID is "),e("b",null,"tt0944947")]),e("p",null,[s(" You can make at-most five("),e("b",null,"5"),s(") requests in one day ")])],-1),te=j({setup(Z){const w=o("pinia"),d=o("wrapFn"),t=b({pinia:w(),title:o("title"),term:"",alert:!1}),c=()=>t.value.alert=!1,q=()=>t.value.alert=!0;let a=b({});const x=()=>{t.value.term="",a.value={}},D=async()=>await E(`requests/${t.value.term}`,!0),C=async()=>{try{await d("Requesting...",async()=>{await U(`requests/${t.value.term}`),t.value.pinia.toast.show("Request made!")})}finally{return c()}},I=async()=>{try{if(!V.imdbId.test(t.value.term))throw t.value.term="",Error("Search term must be a vaild imdbID");a.value=await d("Searching...",D)}catch(r){t.value.pinia.toast.show(String(r),!0)}};t.value.title("Request Page");const z=S();return(r,u)=>{var m,h,p;const R=g("router-link"),T=g("my-alert");return i(),l("div",N,[e("div",P,[(m=B(z).getUser)!=null&&m.admin?(i(),f(R,{key:0,to:"/admin/requests",class:"bar absolute f-round pin-4 pbl-2 f-size-medium c-white bg-gray-l br-4"},{default:v(()=>[M]),_:1})):_("",!0),e("div",$,[e("form",{"data-search":"",class:"flex a-strech w-search min-auto",onSubmit:y(I,["prevent"])},[A(e("input",{class:"w-max pin-3 pbl-2 f-size-normal bw-1 b-gray-d",type:"search","onUpdate:modelValue":u[0]||(u[0]=n=>t.value.term=n),name:"search",placeholder:"Enter the movie/series' imdbID..."},null,512),[[F,t.value.term]]),J],40,G),L]),(h=a.value)!=null&&h.imdbID?(i(),l("div",{key:2,onClick:q,"data-c-request-link":"",tabindex:"0",class:"br-4 min-auto cursor"},[e("h3",K,k(a.value.Title),1),e("div",{class:"close pin-3 br-4 f-size-normal cursor",tabindex:"0",onClick:y(x,["stop"])},"\u274C",8,Q)])):(i(),l("div",O,H))]),X,(p=a.value)!=null&&p.imdbID?(i(),f(T,{key:0,show:t.value.alert,onClose:c,onDone:C},{default:v(()=>{var n;return[s(" Request for `"+k((n=a.value)==null?void 0:n.Title)+"`? ",1)]}),_:1},8,["show"])):_("",!0)])}}});export{te as default};
