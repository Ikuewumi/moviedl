import{d as N,r as d,H as S,i as w,l as p,G as j,w as E,b as G,c as r,e as b,g as l,F as L,f as V,x as q,m as M,j as H,k as y,t as m,A as P,a as Q,W as U}from"./index.5bca4349.js";const W={"data-page-all-requests":"",class:"pbl-8 relative","data-padded":""},J=l("h1",{class:"f-round f-size-big case-lower weight-normal text-center"},"ALL REQUESTS",-1),K={class:"mt-5 grid g-3 min-auto"},O=["onClick"],X={class:"f-size-a-big g-1 f-round weight-normal"},Y={class:"f-size-small pin-1"},Z=["onClick"],ae=N({async setup(ee){let g,v;const n=d({booleans:{alert:!1},i:0}),x=S(),C=w("title"),h=w("wrapFn"),i=p(()=>s.value[n.value.i]),D=(e=0)=>{n.value.i=e,n.value.booleans.alert=!0},A=()=>n.value.booleans.alert=!1;let s=d([]);const T=p(()=>s.value.sort((e,t)=>t.votes-e.votes)),$=()=>{const e=i.value.Type==="series"?"series":"movies",t=i.value.imdbID;return x.push(`/create?type=${e}&imdbid=${t}`)};let f=d(0);const z=20;let c=d(1);j();const _=async()=>{await h("Getting Requests...",async()=>{const t=await Q(`requests?page=${c.value}`,!0);let o=t.data.filter(u=>!s.value.find(a=>a.imdbID===u.imdbID));s.value=[...s.value,...o],c.value=t.page,f.value=t.count})},F=p(()=>c.value*z>=f.value),I=()=>{c.value+=1,_()},R=async e=>{const t=async()=>{await U(`requests/${e}`),s.value.filter(o=>o.imdbID!==e)};confirm("Delete this request?")&&await h("Deleting the request...",t)};return[g,v]=E(()=>_()),await g,v(),C("Admin - All Requests"),(e,t)=>{var u;const o=G("my-alert");return r(),b("div",W,[J,l("section",K,[(r(!0),b(L,null,V(T.value,(a,k)=>(r(),b("div",{"data-c-request-link":"",tabindex:"0",onClick:B=>D(k),class:"br-4 min-auto cursor",key:k},[l("h3",X,[y(m(a.Title),1),l("small",Y,m(a.votes),1)]),l("div",{class:"close pin-3 br-4 f-size-normal cursor",tabindex:"0",onClick:P(B=>R(a.imdbID),["stop"])},"\u274C",8,Z)],8,O))),128)),F.value?q("",!0):(r(),b("span",{key:0,role:"button",onClick:I,class:"w-fit min-auto cursor mt-7 pin-4 pbl-2 f-size-medium c-white bg-blue br-4"},"See More"))]),(u=i.value)!=null&&u.imdbID?(r(),M(o,{key:0,show:n.value.booleans.alert,onClose:A,onDone:$},{default:H(()=>{var a;return[y(" Create `"+m((a=i.value)==null?void 0:a.Title)+"`? ",1)]}),_:1},8,["show"])):q("",!0)])}}});export{ae as default};
