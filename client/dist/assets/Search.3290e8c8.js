import{_ as k}from"./Card.08dc31bf.js";import{d as S,u as D,H as R,G as $,i as B,r as m,l as f,X as C,w as N,c as o,e as p,g as n,t as _,F as z,f as V,x as j,k as F,m as G,a as I}from"./index.5bca4349.js";const T={class:"pbl-4 grid g-2","data-padded":"","data-page-search":""},q={class:"f-round f-size-big weight-bold c-gray-l"},A=F("Search Results - "),E={class:"c-gray-d"},H={class:"f-size-medium mt-2"},L={class:"pbl-2 mt-2 grid g-5","data-card-list":""},J=S({async setup(M){let g,h;const u=D();R();const y=$(),v=B("title");let t=m(1),c=m(0),s=m([]);const b=20,l=f(()=>{var e,r,a;return(a=(r=(e=u.query)==null?void 0:e.term)==null?void 0:r.toString().trim())!=null?a:""}),i=async()=>{try{const e=await I(`pages/search/${l.value}?page=${t.value}`);let r=e.data.filter(a=>!s.value.find(d=>d.imdbID===a.imdbID));s.value=[...s.value,...r],c.value=e.count,t.value=e.page}catch(e){y.show(e,!0)}},w=()=>(t.value+=1,i()),x=f(()=>t.value*b>=c.value);return C(u,()=>{u.params.term!==l.value&&(s.value=[],t.value=1),i(),v(`Search Results - ${l.value}`)}),[g,h]=N(()=>i()),await g,h(),v(`Search Results - ${l.value}`),(e,r)=>(o(),p("div",T,[n("h2",q,[A,n("span",E,'"'+_(l.value)+'"',1)]),n("small",H,_(c.value)+" "+_(c.value===1?"result":"results")+" found!",1),n("ul",L,[(o(!0),p(z,null,V(s.value,(a,d)=>(o(),G(k,{data:a,key:d},null,8,["data"]))),128))]),x.value?j("",!0):(o(),p("span",{key:0,role:"button",class:"w-fit min-auto cursor mt-7 pin-4 pbl-2 f-size-medium c-white bg-blue br-4",onClick:w},"See More"))]))}});export{J as default};
